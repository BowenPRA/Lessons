<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GED Civics: The Legislative Branch (ESL Support)</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Outfit:wght@400;600;800&family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- CSS VARIABLES & THEME --- */
        :root {
            /* Palette - Federal Slate Theme */
            --bg-deep: #0f172a;        /* Dark Slate Blue Background */
            --bg-card: rgba(30, 41, 59, 0.7); /* Glassy Slate */
            --bg-card-hover: rgba(51, 65, 85, 0.8);
            
            --federal-blue: #3b82f6;    /* Primary Action */
            --federal-blue-dim: rgba(59, 130, 246, 0.2);
            --liberty-red: #ef4444;     /* Emphasis/Alerts */
            --constitution-gold: #fbbf24; /* Key Terms/Highlights */
            
            --text-main: #f8fafc;        
            --text-muted: #cbd5e1;       
            --text-vn: #94a3b8;         /* Specific color for Vietnamese text */

            --header-h: 70px;
            --footer-h: 80px;
            --border-radius: 16px;
            
            --fs-h1: clamp(2rem, 5vw, 3.8rem);
            --fs-h2: clamp(1.5rem, 3vw, 2.5rem);
            --fs-body: clamp(1rem, 1.2vw, 1.25rem);
            
            /* Font Families */
            --font-heading: 'Libre Baskerville', serif; /* Academic/Legal feel */
            --font-ui: 'Outfit', sans-serif;            /* UI Elements */
            --font-body: 'Plus Jakarta Sans', sans-serif; /* Reading text */
        }

        /* --- RESET & BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: var(--font-body);
            background-color: var(--bg-deep);
            color: var(--text-main);
            /* Subtle texture overlay */
            background-image: 
                radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.08), transparent 30%),
                radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.05), transparent 30%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231e293b' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* --- LAYOUT --- */
        .app-shell { display: flex; flex-direction: column; height: 100vh; }

        .header {
            height: var(--header-h);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            background: rgba(15, 23, 42, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            z-index: 50;
            flex-shrink: 0;
        }

        .brand-pill {
            background: linear-gradient(135deg, var(--federal-blue), #1d4ed8);
            padding: 0.4rem 1.2rem;
            border-radius: 50px;
            font-family: var(--font-ui);
            font-weight: 800;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .viewport {
            flex: 1;
            position: relative;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
        }

        .slide-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: start; 
            padding: 2rem;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        .slide-center { justify-content: center; }

        .footer {
            height: var(--footer-h);
            background: rgba(15, 23, 42, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            backdrop-filter: blur(12px);
            z-index: 50;
            flex-shrink: 0;
        }

        /* --- COMPONENTS --- */
        .btn-nav {
            width: 50px;
            height: 50px;
            background: var(--bg-card);
            color: var(--text-main);
            font-size: 1.2rem;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-nav:hover:not(:disabled) {
            background: var(--federal-blue);
            border-color: var(--federal-blue);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
            transform: scale(1.05);
        }
        .btn-nav:disabled { opacity: 0.3; cursor: not-allowed; border-color: transparent; }

        .progress-container {
            flex: 1;
            margin: 0 2rem;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--federal-blue), var(--constitution-gold));
            transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        /* Instructions Box (Scaffolding) */
        .instruction-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid var(--constitution-gold);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        .instruction-icon {
            color: var(--constitution-gold);
            font-size: 1.5rem;
            margin-top: 0.2rem;
        }

        .notebook-badge {
            background: var(--constitution-gold);
            color: var(--bg-deep);
            font-weight: 800;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* --- SPECIFIC CHART STYLES (Comparison) --- */
        .chart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .chart-header {
            margin-bottom: 2rem;
            text-align: center;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
        }

        .comp-col {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .comp-col:hover { transform: translateY(-5px); border-color: var(--constitution-gold); }

        .comp-header {
            background: rgba(15, 23, 42, 0.6);
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .comp-header i { font-size: 2.5rem; color: var(--constitution-gold); margin-bottom: 1rem; }
        .comp-header h3 { margin: 0; color: white; }

        .comp-body { padding: 1.5rem; }
        .comp-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .comp-row:last-child { border-bottom: none; }
        .comp-label { color: var(--text-muted); font-size: 0.9rem; }
        .comp-val { font-weight: 700; color: white; text-align: right; }

        /* --- VISUAL DIAGRAM (Flow) --- */
        .flow-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-top: 2rem;
            position: relative;
        }
        
        /* The connecting line behind items */
        .flow-container::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 50px;
            right: 50px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            z-index: 0;
        }

        .flow-step {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 20%;
            text-align: center;
        }

        .flow-icon-circle {
            width: 80px;
            height: 80px;
            background: var(--bg-deep);
            border: 2px solid var(--federal-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--federal-blue);
            margin-bottom: 1rem;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        
        .flow-step:hover .flow-icon-circle {
            background: var(--federal-blue);
            color: white;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
            transform: scale(1.1);
        }

        .flow-label { font-family: var(--font-heading); font-weight: 700; color: white; margin-bottom: 0.3rem; font-size: 1.1rem; }
        .flow-sub { font-family: var(--font-ui); color: var(--text-muted); font-size: 0.9rem; }
        .flow-vn { font-family: var(--font-ui); color: var(--text-vn); font-size: 0.85rem; font-style: italic; margin-top: 0.2rem;}

        .flow-arrow { color: var(--constitution-gold); font-size: 1.5rem; opacity: 0.5; }


        /* --- READING LAYOUT --- */
        .reading-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5rem; /* Increased spacing */
            align-items: start;
        }
        .col-en { font-size: 1.25rem; line-height: 1.8; }
        .col-en p { margin-bottom: 1.5rem; }
        
        .col-vn {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            color: var(--text-vn);
            font-size: 1.15rem; /* Increased font size */
            line-height: 1.8;   /* Matched line height */
            border-left: 2px solid rgba(255,255,255,0.05);
            padding-left: 2rem;
        }
        .col-vn p { margin-bottom: 1.5rem; }

        /* Interactive Keywords */
        .keyword {
            color: var(--constitution-gold);
            font-weight: 700;
            border-bottom: 2px dashed rgba(251, 191, 36, 0.4);
            cursor: help;
            transition: all 0.2s;
            position: relative;
            display: inline-block;
        }
        .keyword:hover, .keyword.active-touch {
            background: rgba(251, 191, 36, 0.15);
            border-bottom-style: solid;
        }

        /* Definition Dock (Refined) */
        .def-dock {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.98); /* Less transparent for readability */
            border-top: 2px solid var(--constitution-gold);
            padding: 1.5rem 2rem;
            backdrop-filter: blur(20px);
            transform: translateY(110%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 100;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .def-dock.active { transform: translateY(0); }
        .def-content { max-width: 900px; width: 100%; display: flex; flex-direction: column; gap: 0.8rem; }
        
        .def-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Vocab Grid */
        .vocab-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .vocab-card { background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1.5rem; }
        .vocab-term { color: var(--constitution-gold); font-family: var(--font-heading); font-size: 1.2rem; font-weight: 700; margin-bottom: 0.2rem; }
        .vocab-vn { color: var(--text-vn); font-family: var(--font-ui); font-weight: 700; font-size: 0.9rem; margin-bottom: 0.8rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem; display: block; }

        /* Quiz */
        .quiz-option {
            width: 100%;
            padding: 1.2rem;
            margin-bottom: 0.8rem;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: var(--text-main);
            text-align: left;
            cursor: pointer;
            font-size: 1.1rem;
            font-family: var(--font-ui);
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .quiz-option:hover:not(:disabled) { background: rgba(255,255,255,0.08); border-color: var(--federal-blue); }
        .quiz-option.correct { background: rgba(16, 185, 129, 0.2); border-color: #10b981; color: white; }
        .quiz-option.incorrect { background: rgba(239, 68, 68, 0.2); border-color: var(--liberty-red); color: white; }
        .explanation-box {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid var(--constitution-gold);
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0 8px 8px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        /* Typography & Utilities */
        .text-center { text-align: center; }
        .text-gold { color: var(--constitution-gold); }
        .text-blue { color: var(--federal-blue); }
        
        h1 { font-family: var(--font-heading); font-size: var(--fs-h1); margin-bottom: 0.5rem; }
        h2 { font-family: var(--font-heading); font-size: var(--fs-h2); color: white; margin-bottom: 1.5rem; }
        h3 { font-family: var(--font-ui); font-size: 1.3rem; margin-bottom: 0.5rem; color: white; }
        p { margin-bottom: 1rem; color: var(--text-muted); line-height: 1.6; }
        
        .fade-in { animation: fadeIn 0.6s ease-out forwards; opacity: 0; }
        .slide-up { animation: slideUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; transform: translateY(20px); animation-delay: 0.2s; }
        
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            .reading-layout { grid-template-columns: 1fr; gap: 2rem; }
            .col-vn { border-left: none; border-top: 1px solid rgba(255,255,255,0.1); padding-left: 0; padding-top: 1.5rem; }
            .comparison-grid { grid-template-columns: 1fr; }
            .def-dock { padding: 1rem; }
            .vocab-grid { grid-template-columns: 1fr; }
            .flow-container { flex-direction: column; gap: 2rem; }
            .flow-container::before { width: 4px; height: 100%; top: 0; left: 50%; transform: translateX(-50%); }
            .flow-step { width: 100%; }
            .flow-arrow { transform: rotate(90deg); margin: 0.5rem 0; }
        }
    </style>
</head>
<body>

<div class="app-shell">
    <header class="header">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div class="brand-pill">GED Civics</div>
            <span style="font-weight: 600; color: var(--text-muted); font-size: 0.9rem; font-family: var(--font-ui); display: none; margin-left: 0.5rem; @media(min-width:600px){display:inline;}">The Legislative Branch</span>
        </div>
        <div style="color: var(--constitution-gold); font-size: 1.5rem;">
            <i class="fa-solid fa-building-columns"></i>
        </div>
    </header>

    <main class="viewport" id="viewport">
        <div id="slide-container" class="slide-wrapper" aria-live="polite">
            <!-- Content -->
        </div>
        <div style="height: 60px;"></div>
    </main>
    
    <div id="def-dock" class="def-dock">
        <div class="def-content">
            <div class="def-header">
                <div>
                    <span style="color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px;">Vocabulary</span>
                    <h3 id="dock-term" style="color: var(--constitution-gold); font-size: 1.8rem; font-family: var(--font-heading); margin:0;">Term</h3>
                </div>
                <span id="dock-vn" style="color: white; font-weight: 700; font-family: var(--font-ui); background: var(--federal-blue); padding: 0.3rem 1rem; border-radius: 6px; box-shadow: 0 4px 10px rgba(59,130,246,0.3);">Translation</span>
            </div>
            <p id="dock-def" style="color: white; font-size: 1.2rem; margin: 0; border-left: 3px solid var(--federal-blue); padding-left: 1rem;">Definition</p>
            <p id="dock-vn-def" style="color: var(--text-vn); font-size: 1.1rem; margin: 0; font-style: italic; border-left: 3px solid transparent; padding-left: 1rem;">Vietnamese Definition</p>
        </div>
    </div>

    <footer class="footer">
        <button class="btn-nav" id="btn-prev" aria-label="Previous Slide"><i class="fa-solid fa-arrow-left"></i></button>
        <div class="progress-container"><div class="progress-fill" id="progress-fill"></div></div>
        <button class="btn-nav" id="btn-next" aria-label="Next Slide"><i class="fa-solid fa-arrow-right"></i></button>
    </footer>
</div>

<script>
    // --- CONTENT DATA ---
    // Refactored for Simple English (CEFR A2/B1) and Bilingual support
    const glossary = {
        "bicameral": {
            def: "A government group with two separate parts (Senate & House).",
            vn: "Lưỡng viện",
            vn_def: "Cơ quan lập pháp có hai viện riêng biệt (Thượng viện & Hạ viện)."
        },
        "census": {
            def: "A count of all the people in the country. It happens every 10 years.",
            vn: "Điều tra dân số",
            vn_def: "Cuộc đếm dân số chính thức 10 năm một lần."
        },
        "constituents": {
            def: "The people who live in an area and vote for a leader.",
            vn: "Cử tri",
            vn_def: "Những người sống trong một khu vực cụ thể bầu ra người đại diện."
        },
        "enumerated powers": {
            def: "Powers that are clearly written in the Constitution.",
            vn: "Các quyền được liệt kê",
            vn_def: "Các quyền được liệt kê rõ ràng trong Hiến pháp."
        },
        "elastic clause": {
            def: "A rule that lets Congress make new laws for new problems.",
            vn: "Điều khoản co giãn",
            vn_def: "Điều khoản cho phép Quốc hội ban hành luật mới cho các tình huống mới."
        },
        "bill": {
            def: "An idea or proposal for a new law.",
            vn: "Dự luật",
            vn_def: "Một đề xuất cho một đạo luật mới."
        },
        "committee": {
            def: "A small group of experts who study bills carefully.",
            vn: "Ủy ban",
            vn_def: "Một nhóm nhỏ các thành viên nghiên cứu kỹ các dự luật."
        },
        "veto": {
            def: "The President says 'No' to a bill.",
            vn: "Phủ quyết",
            vn_def: "Quyền của Tổng thống từ chối một dự luật."
        },
        "override": {
            def: "Congress votes to pass a law even if the President said 'No'.",
            vn: "Bác bỏ (quyền phủ quyết)",
            vn_def: "Quốc hội thông qua luật bất chấp sự phủ quyết của Tổng thống."
        }
    };

    const slides = [
        // SLIDE 1: INTRO (Instructions Added)
        {
            render: () => `
                <div class="slide-wrapper slide-center">
                    <div class="text-center fade-in" style="max-width: 800px; margin: 0 auto;">
                        <div style="font-size: 5rem; color: var(--constitution-gold); margin-bottom: 2rem; filter: drop-shadow(0 0 40px rgba(251,191,36,0.3));">
                            <i class="fa-solid fa-people-roof"></i>
                        </div>
                        <h1>The Legislative Branch</h1>
                        <p style="font-size: 1.4rem; color: var(--text-muted); margin-bottom: 3rem; font-family: var(--font-ui);">
                            Article I of the U.S. Constitution
                        </p>
                        
                        <!-- Scaffolding Instruction Box -->
                        <div class="instruction-box slide-up">
                            <i class="fa-solid fa-pen-to-square instruction-icon"></i>
                            <div style="text-align: left;">
                                <strong style="color: white; display: block; margin-bottom: 0.5rem; font-size: 1.1rem;">Instructions:</strong>
                                <span style="color: var(--text-muted);">Read the passages carefully. When you see a <span class="text-gold">gold vocabulary word</span>, copy the word and its definition into your notebook.</span>
                            </div>
                        </div>

                        <div class="card slide-up" style="text-align: left; border-left: 4px solid var(--federal-blue);">
                            <h3 style="color: var(--federal-blue); text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem; margin-bottom: 1rem;">Lesson Objectives</h3>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin-bottom: 0.8rem; display: flex; align-items: center; font-size: 1.1rem;">
                                    <i class="fa-solid fa-check-circle text-gold" style="margin-right: 12px;"></i> Compare the House of Representatives and the Senate.
                                </li>
                                <li style="margin-bottom: 0.8rem; display: flex; align-items: center; font-size: 1.1rem;">
                                    <i class="fa-solid fa-check-circle text-gold" style="margin-right: 12px;"></i> Understand "Enumerated" vs "Implied" powers.
                                </li>
                                <li style="margin-bottom: 0; display: flex; align-items: center; font-size: 1.1rem;">
                                    <i class="fa-solid fa-check-circle text-gold" style="margin-right: 12px;"></i> Trace how a Bill becomes a Law.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 2: COMPARISON DIAGRAM (Updated with Badge + Extra Rows)
        {
            render: () => `
                <div class="slide-wrapper slide-center">
                    <div class="fade-in" style="width: 100%;">
                        <div class="chart-header">
                            <span class="notebook-badge"><i class="fa-solid fa-book-open"></i> Copy this table</span>
                            <h2 style="margin-bottom: 0.5rem; margin-top: 1rem;">Congress: A Bicameral System</h2>
                            <p>Comparing the two houses of the Legislative Branch</p>
                        </div>

                        <div class="comparison-grid slide-up">
                            <!-- House -->
                            <div class="comp-col">
                                <div class="comp-header">
                                    <i class="fa-solid fa-users"></i>
                                    <h3>House of Representatives</h3>
                                    <div style="font-size:0.9rem; color: var(--text-vn); margin-top:0.2rem;">Hạ viện</div>
                                </div>
                                <div class="comp-body">
                                    <div class="comp-row">
                                        <span class="comp-label">Members</span>
                                        <span class="comp-val">435</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Representation</span>
                                        <span class="comp-val">Based on Population</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Term Length</span>
                                        <span class="comp-val">2 Years</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Area Represented</span>
                                        <span class="comp-val">District (Small Area)</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Key Power</span>
                                        <span class="comp-val">Start Tax Bills</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Leader</span>
                                        <span class="comp-val">Speaker of the House</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Senate -->
                            <div class="comp-col">
                                <div class="comp-header">
                                    <i class="fa-solid fa-landmark-dome"></i>
                                    <h3>The Senate</h3>
                                    <div style="font-size:0.9rem; color: var(--text-vn); margin-top:0.2rem;">Thượng viện</div>
                                </div>
                                <div class="comp-body">
                                    <div class="comp-row">
                                        <span class="comp-label">Members</span>
                                        <span class="comp-val">100 (2 per state)</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Representation</span>
                                        <span class="comp-val">Equal (Per State)</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Term Length</span>
                                        <span class="comp-val">6 Years</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Area Represented</span>
                                        <span class="comp-val">Whole State</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Key Power</span>
                                        <span class="comp-val">Approve Treaties/Judges</span>
                                    </div>
                                    <div class="comp-row">
                                        <span class="comp-label">Leader</span>
                                        <span class="comp-val">Vice President</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 3: READING - STRUCTURE
        {
            render: () => `
                <div class="slide-wrapper">
                    <div class="fade-in">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                             <span class="brand-pill" style="background: var(--constitution-gold); color: #0f172a;">Structure</span>
                             <h2 style="margin:0;">The Great Compromise</h2>
                        </div>

                        <div class="card reading-layout slide-up">
                            <div class="col-en">
                                <p>When the Constitution was written, big states wanted representation based on population. Small states wanted equal representation. The solution was a <span class="keyword" data-term="bicameral">bicameral</span> legislature: one house for population (House of Reps) and one for equal state status (Senate).</p>
                                <p>The House of Representatives is closer to the people. Members serve short 2-year terms. They must listen to their <span class="keyword" data-term="constituents">constituents</span> to get re-elected. The number of representatives depends on the <span class="keyword" data-term="census">census</span>, a count of the population taken every 10 years.</p>
                                <p>The Senate is more stable. Senators serve long 6-year terms. This allows them to make hard decisions without worrying about elections right away. Originally, they were chosen by state legislatures, not the people.</p>
                            </div>
                            <div class="col-vn">
                                <p>Khi Hiến pháp được soạn thảo, các bang lớn muốn đại diện dựa trên dân số. Các bang nhỏ muốn đại diện bình đẳng. Giải pháp là một cơ quan lập pháp lưỡng viện: một viện dựa trên dân số (Hạ viện) và một viện có vị thế bang bình đẳng (Thượng viện).</p>
                                <p>Hạ viện gần gũi hơn với người dân. Các thành viên phục vụ nhiệm kỳ ngắn 2 năm. Họ phải lắng nghe cử tri của mình để được tái đắc cử. Số lượng đại diện phụ thuộc vào cuộc điều tra dân số, một cuộc đếm dân số được thực hiện 10 năm một lần.</p>
                                <p>Thượng viện ổn định hơn. Các thượng nghị sĩ phục vụ nhiệm kỳ dài 6 năm. Điều này cho phép họ đưa ra những quyết định khó khăn mà không phải lo lắng ngay về các cuộc bầu cử. Ban đầu, họ được chọn bởi các cơ quan lập pháp bang, không phải người dân.</p>
                            </div>
                        </div>
                        <div class="text-center" style="margin-top: 2rem; color: var(--constitution-gold); font-size: 0.9rem;">
                            <i class="fa-solid fa-hand-pointer"></i> Tap the underlined words for definitions.
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 4: READING - POWERS
        {
            render: () => `
                <div class="slide-wrapper">
                    <div class="fade-in">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                             <i class="fa-solid fa-bolt text-gold" style="font-size: 2rem;"></i>
                             <h2 style="margin:0;">The Powers of Congress</h2>
                        </div>

                        <div class="card reading-layout slide-up">
                            <div class="col-en">
                                <p>Article I lists the powers of Congress. These are called <span class="keyword" data-term="enumerated powers">enumerated powers</span>. They include the power to collect taxes, print money, regulate trade between states, and declare war.</p>
                                <p>However, the Founders could not predict the future. So, they added the "Necessary and Proper Clause," also known as the <span class="keyword" data-term="elastic clause">Elastic Clause</span>. This allows Congress to stretch its powers to handle new situations, like creating the Air Force or regulating the internet.</p>
                                <p>The Senate has special "Advice and Consent" powers. They must approve treaties signed by the President. They also vote to confirm important jobs like Supreme Court Justices.</p>
                            </div>
                            <div class="col-vn">
                                <p>Điều I liệt kê các quyền hạn của Quốc hội. Đây được gọi là các quyền được liệt kê. Chúng bao gồm quyền thu thuế, in tiền, điều chỉnh thương mại giữa các bang và tuyên chiến.</p>
                                <p>Tuy nhiên, các nhà sáng lập không thể đoán trước tương lai. Vì vậy, họ đã thêm "Điều khoản Cần thiết và Phù hợp", còn được gọi là Điều khoản Co giãn. Điều này cho phép Quốc hội mở rộng quyền hạn của mình để xử lý các tình huống mới, như thành lập Không quân hoặc điều chỉnh internet.</p>
                                <p>Thượng viện có quyền "Tư vấn và Chấp thuận" đặc biệt. Họ phải phê chuẩn các hiệp ước do Tổng thống ký. Họ cũng bỏ phiếu để xác nhận các vị trí quan trọng như Thẩm phán Tòa án Tối cao.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 5: READING - PROCESS
        {
            render: () => `
                <div class="slide-wrapper">
                    <div class="fade-in">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                             <i class="fa-solid fa-file-signature text-gold" style="font-size: 2rem;"></i>
                             <h2 style="margin:0;">How a Bill Becomes a Law</h2>
                        </div>

                        <div class="card reading-layout slide-up">
                            <div class="col-en">
                                <p>Creating a law is difficult. It starts as a <span class="keyword" data-term="bill">bill</span>. First, the bill is sent to a <span class="keyword" data-term="committee">committee</span>. This is a small group of experts who study it. Most bills die here.</p>
                                <p>If the committee approves it, the whole House or Senate votes. If it passes, it goes to the other chamber to repeat the process. Both the House and Senate must pass the <em>exact same</em> version of the bill.</p>
                                <p>Finally, it goes to the President. The President can sign it into law or <span class="keyword" data-term="veto">veto</span> (reject) it. If vetoed, Congress can still make it a law if 2/3 of members vote to <span class="keyword" data-term="override">override</span> the veto.</p>
                            </div>
                            <div class="col-vn">
                                <p>Tạo ra một đạo luật rất khó khăn. Nó bắt đầu như một dự luật. Đầu tiên, dự luật được gửi đến một ủy ban. Đây là một nhóm nhỏ các chuyên gia nghiên cứu nó. Hầu hết các dự luật đều "chết" ở đây.</p>
                                <p>Nếu ủy ban chấp thuận, toàn bộ Hạ viện hoặc Thượng viện sẽ bỏ phiếu. Nếu được thông qua, nó sẽ chuyển sang viện kia để lặp lại quy trình. Cả Hạ viện và Thượng viện phải thông qua phiên bản <em>chính xác giống nhau</em> của dự luật.</p>
                                <p>Cuối cùng, nó được chuyển đến Tổng thống. Tổng thống có thể ký thành luật hoặc phủ quyết (từ chối) nó. Nếu bị phủ quyết, Quốc hội vẫn có thể biến nó thành luật nếu 2/3 thành viên bỏ phiếu để bác bỏ quyền phủ quyết.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 6: NEW VISUAL DIAGRAM (PATH TO LAW)
        {
            render: () => `
                <div class="slide-wrapper slide-center">
                    <div class="fade-in" style="width: 100%;">
                        <div class="text-center" style="margin-bottom: 3rem;">
                            <span class="brand-pill" style="background: var(--federal-blue);">Visual Guide</span>
                            <h2 style="margin-top: 1rem;">Path to Law</h2>
                            <p>Follow the steps from idea to reality.</p>
                        </div>

                        <div class="flow-container slide-up">
                            <!-- Step 1 -->
                            <div class="flow-step">
                                <div class="flow-icon-circle">
                                    <i class="fa-solid fa-file-lines"></i>
                                </div>
                                <div class="flow-label">1. Introduction</div>
                                <div class="flow-sub">Idea written as a Bill</div>
                                <div class="flow-vn">Giới thiệu dự luật</div>
                            </div>
                            
                            <i class="fa-solid fa-arrow-right flow-arrow"></i>

                            <!-- Step 2 -->
                            <div class="flow-step">
                                <div class="flow-icon-circle">
                                    <i class="fa-solid fa-people-group"></i>
                                </div>
                                <div class="flow-label">2. Committee</div>
                                <div class="flow-sub">Experts study & edit</div>
                                <div class="flow-vn">Ủy ban nghiên cứu</div>
                            </div>

                            <i class="fa-solid fa-arrow-right flow-arrow"></i>

                            <!-- Step 3 -->
                            <div class="flow-step">
                                <div class="flow-icon-circle">
                                    <i class="fa-solid fa-gavel"></i>
                                </div>
                                <div class="flow-label">3. Floor Vote</div>
                                <div class="flow-sub">House & Senate vote</div>
                                <div class="flow-vn">Bỏ phiếu</div>
                            </div>

                            <i class="fa-solid fa-arrow-right flow-arrow"></i>

                            <!-- Step 4 -->
                            <div class="flow-step">
                                <div class="flow-icon-circle">
                                    <i class="fa-solid fa-pen-nib"></i>
                                </div>
                                <div class="flow-label">4. President</div>
                                <div class="flow-sub">Sign or Veto</div>
                                <div class="flow-vn">Tổng thống ký/hủy</div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        },

        // SLIDE 7: VOCAB
        {
            render: () => {
                let cards = '';
                for (const [key, val] of Object.entries(glossary)) {
                    const title = key.replace(/\b\w/g, l => l.toUpperCase());
                    cards += `
                        <div class="vocab-card">
                            <div class="vocab-term">${title}</div>
                            <div class="vocab-vn">${val.vn}</div>
                            <div style="margin-bottom:0.5rem; color:#fff;">${val.def}</div>
                            <div style="color:var(--text-vn); font-style:italic; font-size:0.9rem;">${val.vn_def}</div>
                        </div>
                    `;
                }
                return `
                    <div class="slide-wrapper">
                        <div class="fade-in">
                            <div class="text-center">
                                <span class="brand-pill" style="background: var(--constitution-gold); color: #0f172a;">Review</span>
                                <h2 style="margin-top: 1rem;">Legislative Vocabulary</h2>
                            </div>
                            <div class="vocab-grid slide-up">
                                ${cards}
                            </div>
                        </div>
                    </div>
                `;
            }
        },

        // SLIDE 8: QUIZ
        {
            render: () => `
                <div class="slide-wrapper slide-center">
                    <div class="fade-in" style="max-width: 800px; width: 100%; margin: 0 auto;">
                        <div class="text-center" style="margin-bottom: 2rem;">
                             <span class="brand-pill" style="background: var(--federal-blue);">Assessment</span>
                             <h2 style="margin-top: 1rem;">Final Quiz</h2>
                        </div>

                        <div class="slide-up">
                            <!-- Q1 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 1 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">How is representation decided in the House of Representatives?</h3>
                                <div id="q1-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q1')">A. Every state gets 2 representatives.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q1')">B. Based on the state's population.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q1')">C. Appointed by the President.</button>
                                </div>
                                <div id="q1-explain" class="explanation-box">
                                    <strong>Explanation:</strong> The House represents the people. States with more people (like California) get more representatives.
                                </div>
                            </div>

                            <!-- Q2 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 2 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">How long is the term for a US Senator?</h3>
                                <div id="q2-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q2')">A. 2 Years</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q2')">B. 4 Years</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q2')">C. 6 Years</button>
                                </div>
                                <div id="q2-explain" class="explanation-box">
                                    <strong>Explanation:</strong> Senators serve 6-year terms. This helps them focus on long-term goals.
                                </div>
                            </div>

                            <!-- Q3 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 3 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">What is the "Elastic Clause"?</h3>
                                <div id="q3-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q3')">A. Power to make laws "necessary and proper" for new situations.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q3')">B. Power to tax rubber bands.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q3')">C. Power to extend a Senator's term.</button>
                                </div>
                                <div id="q3-explain" class="explanation-box">
                                    <strong>Explanation:</strong> The Elastic Clause allows Congress to "stretch" its power to handle new issues not listed in the Constitution.
                                </div>
                            </div>

                            <!-- Q4 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 4 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">What happens if the President vetoes a bill?</h3>
                                <div id="q4-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q4')">A. The bill is dead forever.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q4')">B. Congress can override it with a 2/3 vote.</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q4')">C. The Supreme Court decides.</button>
                                </div>
                                <div id="q4-explain" class="explanation-box">
                                    <strong>Explanation:</strong> A veto stops a bill, but Congress can check the President. They can "Override" the veto with a 2/3 vote.
                                </div>
                            </div>

                            <!-- Q5 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 5 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">Which chamber confirms Presidential appointments (like judges)?</h3>
                                <div id="q5-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q5')">A. The House of Representatives</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q5')">B. The Senate</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q5')">C. Both House and Senate</button>
                                </div>
                                <div id="q5-explain" class="explanation-box">
                                    <strong>Explanation:</strong> Only the Senate has the power of "Advice and Consent" to approve people the President wants to hire.
                                </div>
                            </div>

                            <!-- Q6 -->
                            <div class="card" style="margin-bottom: 2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span class="text-gold" style="font-weight: 800;">Question 6 / 6</span>
                                </div>
                                <h3 style="margin-bottom: 1.5rem;">Who is the leader of the House of Representatives?</h3>
                                <div id="q6-opts">
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q6')">A. The Vice President</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, false, 'q6')">B. The Oldest Member</button>
                                    <button class="quiz-option" onclick="handleQuiz(this, true, 'q6')">C. The Speaker of the House</button>
                                </div>
                                <div id="q6-explain" class="explanation-box">
                                    <strong>Explanation:</strong> The Speaker of the House is the leader. They are elected by the members and are second in line to be President.
                                </div>
                            </div>
                            
                            <div class="text-center" style="margin-top: 3rem;">
                                <button onclick="location.reload()" style="background: transparent; color: var(--text-muted); border: 1px solid var(--text-muted); padding: 0.8rem 2rem; border-radius: 50px; cursor: pointer; transition: all 0.2s;">
                                    <i class="fa-solid fa-rotate-right"></i> Restart Lesson
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `
        }
    ];

    // --- LOGIC ---
    let currentSlide = 0;
    const slideContainer = document.getElementById('slide-container');
    const progressBar = document.getElementById('progress-fill');
    const btnNext = document.getElementById('btn-next');
    const btnPrev = document.getElementById('btn-prev');
    const dock = document.getElementById('def-dock');

    function renderSlide() {
        slideContainer.innerHTML = slides[currentSlide].render();
        const progress = ((currentSlide + 1) / slides.length) * 100;
        progressBar.style.width = `${progress}%`;
        btnPrev.disabled = currentSlide === 0;
        btnNext.disabled = currentSlide === slides.length - 1;
        document.getElementById('viewport').scrollTop = 0;
        attachKeywordListeners();
    }

    function changeSlide(direction) {
        if (direction === 'next' && currentSlide < slides.length - 1) currentSlide++;
        else if (direction === 'prev' && currentSlide > 0) currentSlide--;
        renderSlide();
    }

    function attachKeywordListeners() {
        document.querySelectorAll('.keyword').forEach(el => {
            const termKey = el.dataset.term.toLowerCase();
            const data = glossary[termKey];
            if (!data) return;
            el.addEventListener('mouseenter', () => showDock(termKey, data));
            el.addEventListener('mouseleave', hideDock);
            el.addEventListener('click', (e) => { e.stopPropagation(); showDock(termKey, data); });
        });
    }

    function showDock(term, data) {
        document.getElementById('dock-term').innerText = term.replace(/\b\w/g, l => l.toUpperCase());
        document.getElementById('dock-def').innerText = data.def;
        document.getElementById('dock-vn').innerText = data.vn;
        // Also show the Vietnamese Definition
        document.getElementById('dock-vn-def').innerText = data.vn_def;
        dock.classList.add('active');
    }

    function hideDock() { dock.classList.remove('active'); }

    window.handleQuiz = function(btn, isCorrect, qId) {
        const parent = document.getElementById(qId + '-opts');
        const explainBox = document.getElementById(qId + '-explain');
        parent.querySelectorAll('.quiz-option').forEach(opt => {
            opt.disabled = true;
            opt.style.cursor = 'default';
            opt.style.opacity = '0.6';
        });
        btn.style.opacity = '1';
        if (isCorrect) {
            btn.classList.add('correct');
            btn.innerHTML += ' <i class="fa-solid fa-check" style="float:right;"></i>';
        } else {
            btn.classList.add('incorrect');
            btn.innerHTML += ' <i class="fa-solid fa-xmark" style="float:right;"></i>';
        }
        if(explainBox) explainBox.style.display = 'block';
    };

    btnNext.addEventListener('click', () => changeSlide('next'));
    btnPrev.addEventListener('click', () => changeSlide('prev'));
    document.body.addEventListener('click', () => { if(dock.classList.contains('active')) hideDock(); });
    document.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowRight') changeSlide('next');
        if(e.key === 'ArrowLeft') changeSlide('prev');
    });

    renderSlide();

</script>
</body>
</html>
