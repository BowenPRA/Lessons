<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.3 Variation & 7.4 Natural Selection</title>
    
    <!-- Fonts: Outfit (Headings) and Plus Jakarta Sans (Body) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Plus+Jakarta+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            /* Theme Colors */
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --primary: #10b981;   /* Green - Nature/Bio */
            --secondary: #8b5cf6; /* Purple - Genetics/DNA */
            --accent: #f472b6;    /* Pink - Highlight */
            --warning: #f59e0b;   /* Amber - "Write this down" */
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            
            --card-radius: 16px;
            --shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }

        /* --- Global Reset & Body --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow: hidden; /* Prevent body scroll, handle in viewport */
            height: 100vh;
            width: 100vw;
        }

        /* --- Dynamic Background --- */
        .bg-fx {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 10% 20%, rgba(16, 185, 129, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 40%);
            pointer-events: none;
        }
        
        /* --- Layout Shell --- */
        .app-shell {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* --- Header --- */
        header {
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- Viewport (Slide Area) --- */
        .viewport {
            flex: 1;
            position: relative;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .slide-container {
            min-height: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically center content */
        }

        /* --- Footer/Controls --- */
        footer {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            background: rgba(15, 23, 42, 0.9);
            z-index: 10;
        }

        .progress-bar {
            flex: 1;
            margin: 0 2rem;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        /* --- Typography --- */
        h1, h2, h3 { font-family: 'Outfit', sans-serif; color: white; line-height: 1.2; }
        h1 { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 900; }
        h2 { font-size: clamp(2rem, 4vw, 3rem); font-weight: 700; margin-bottom: 1.5rem; }
        h3 { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        p { font-size: 1.2rem; line-height: 1.6; color: var(--text-muted); margin-bottom: 1rem; }
        strong { color: white; font-weight: 700; }
        .term { color: var(--secondary); font-weight: 800; }

        /* --- Components --- */
        
        /* NOTE BOX (The Key Concept Cue) */
        .note-box {
            position: relative;
            background: rgba(245, 158, 11, 0.08);
            border: 2px solid var(--warning);
            border-radius: 12px;
            padding: 2rem 1.5rem 1.5rem 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
        }
        
        .note-badge {
            position: absolute;
            top: -14px;
            left: 20px;
            background: var(--bg-dark);
            border: 2px solid var(--warning);
            color: var(--warning);
            padding: 0.2rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Grids */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: center; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .img-card {
            border-radius: var(--card-radius);
            overflow: hidden;
            border: 4px solid var(--bg-card);
            box-shadow: var(--shadow);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }
        .img-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            max-height: 450px;
        }

        /* Buttons */
        .btn {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn:hover:not(:disabled) { background: var(--primary); border-color: var(--primary); transform: scale(1.1); }
        .btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .btn-text {
            width: auto; height: auto; border-radius: 8px; padding: 0.8rem 1.5rem; font-weight: 700;
        }

        /* Animations */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate { animation: fadeUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; }
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }

        /* --- Specific Interactive Elements --- */
        
        /* Flip Cards */
        .flip-container { perspective: 1000px; height: 280px; cursor: pointer; }
        .flip-inner {
            position: relative; width: 100%; height: 100%; text-align: center;
            transition: transform 0.8s; transform-style: preserve-3d;
        }
        .flip-container.flipped .flip-inner { transform: rotateY(180deg); }
        .flip-front, .flip-back {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; border-radius: var(--card-radius);
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem;
        }
        .flip-front { background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); }
        .flip-back { background: linear-gradient(135deg, var(--secondary), #6d28d9); transform: rotateY(180deg); color: white; }

        /* Moth Sim */
        .moth-zone {
            height: 300px;
            border-radius: var(--card-radius);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            place-items: center;
            transition: all 0.5s ease;
            position: relative;
            margin-bottom: 1rem;
        }
        .moth-zone.clean { background: #cbd5e1; /* Light Bark */ }
        .moth-zone.dirty { background: #334155; /* Soot */ }
        
        .moth { font-size: 3rem; transition: opacity 0.5s; cursor: pointer; }
        .moth:hover { transform: scale(1.2); }
        
        .clean .moth-light { opacity: 0.2; color: #94a3b8; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); } /* Hidden on light */
        .clean .moth-dark { opacity: 1; color: #1e293b; }   /* Visible on light */
        
        .dirty .moth-light { opacity: 1; color: #e2e8f0; }   /* Visible on dark */
        .dirty .moth-dark { opacity: 0.2; color: #0f172a; filter: drop-shadow(0 2px 2px rgba(255,255,255,0.1)); } /* Hidden on dark */

        /* Chart Animations */
        .bar { transition: height 1s ease-out; height: 0; }
        
        /* Mobile adjustment */
        @media(max-width: 900px) {
            .grid-2 { grid-template-columns: 1fr; gap: 1.5rem; }
            h1 { font-size: 2.5rem; }
        }
    </style>
</head>
<body>

<div class="bg-fx"></div>

<div class="app-shell">
    <header>
        <div class="brand">
            <span class="badge">Year 9 Science</span>
            <span style="font-weight: 600; color: white;">Cambridge Stage 9</span>
        </div>
        <div style="font-family: 'Outfit'; font-weight: 700; color: var(--text-muted);">
            7.3 Variation & 7.4 Natural Selection
        </div>
    </header>

    <main class="viewport">
        <div id="slide-root" class="slide-container">
            <!-- Content Injected Here -->
        </div>
    </main>

    <footer>
        <button class="btn" id="prev-btn" onclick="prevSlide()"><i class="fa-solid fa-arrow-left"></i></button>
        <div class="progress-bar">
            <div id="progress" class="progress-fill"></div>
        </div>
        <button class="btn" id="next-btn" onclick="nextSlide()"><i class="fa-solid fa-arrow-right"></i></button>
    </footer>
</div>

<script>
    // --- Slide Data ---
    const slides = [
        // 1. Title
        {
            content: `
                <div style="text-align: center;" class="animate">
                    <div style="font-size: 5rem; color: var(--primary); margin-bottom: 1rem;">
                        <i class="fa-solid fa-dna fa-spin" style="--fa-animation-duration: 10s;"></i>
                    </div>
                    <h1>Variation & Natural Selection</h1>
                    <p style="font-size: 1.5rem; margin-top: 1rem;">Why are we all unique?</p>
                    
                    <div class="grid-3 delay-1 animate" style="margin-top: 4rem; text-align: left;">
                        <div class="card">
                            <h3 style="color: var(--primary);">1. Variation</h3>
                            <p>Understand differences within a species.</p>
                        </div>
                        <div class="card">
                            <h3 style="color: var(--secondary);">2. Natural Selection</h3>
                            <p>How species change over time.</p>
                        </div>
                        <div class="card">
                            <h3 style="color: var(--accent);">3. Evidence</h3>
                            <p>Real examples: Moths & Bacteria.</p>
                        </div>
                    </div>
                </div>
            `
        },
        // 2. Definitions (Warm Up)
        {
            content: `
                <div class="animate">
                    <span class="badge" style="background: var(--warning); color: black;">Warm Up</span>
                    <h2>Key Definitions</h2>
                    <p>Flip the cards to reveal the definitions. Do you know them?</p>
                    
                    <div class="grid-3 delay-1 animate" style="margin-top: 2rem;">
                        <!-- Card 1 -->
                        <div class="flip-container" onclick="this.classList.toggle('flipped')">
                            <div class="flip-inner">
                                <div class="flip-front">
                                    <i class="fa-solid fa-fingerprint" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                                    <h3>Species</h3>
                                </div>
                                <div class="flip-back">
                                    <h3>Species</h3>
                                    <p>A group of organisms that can breed to produce <strong>fertile offspring</strong>.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Card 2 -->
                        <div class="flip-container" onclick="this.classList.toggle('flipped')">
                            <div class="flip-inner">
                                <div class="flip-front">
                                    <i class="fa-solid fa-microscope" style="font-size: 3rem; color: var(--secondary); margin-bottom: 1rem;"></i>
                                    <h3>DNA</h3>
                                </div>
                                <div class="flip-back">
                                    <h3>DNA</h3>
                                    <p>The molecule inside the nucleus that carries <strong>genetic instructions</strong>.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Card 3 -->
                        <div class="flip-container" onclick="this.classList.toggle('flipped')">
                            <div class="flip-inner">
                                <div class="flip-front">
                                    <i class="fa-solid fa-users-viewfinder" style="font-size: 3rem; color: var(--accent); margin-bottom: 1rem;"></i>
                                    <h3>Inheritance</h3>
                                </div>
                                <div class="flip-back">
                                    <h3>Inheritance</h3>
                                    <p>The passing on of characteristics from parents to offspring.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        },
        // 3. What is Variation?
        {
            content: `
                <div class="grid-2 animate">
                    <div>
                        <h2>What is Variation?</h2>
                        <div class="note-box delay-1 animate">
                            <div class="note-badge"><i class="fa-solid fa-pen"></i> Copy This</div>
                            <p><strong class="term">Variation</strong> is the differences between individuals of the same species.</p>
                        </div>
                        
                        <p>Look at the goats. They are the same species, but look different.</p>
                        
                        <h3 style="margin-top: 2rem;">Causes of Variation:</h3>
                        <ul style="list-style: none; margin-left: 0;">
                            <li style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                                <i class="fa-solid fa-dna" style="color: var(--secondary);"></i> <strong>Genetic:</strong> Inherited (Eye colour).
                            </li>
                            <li style="display: flex; align-items: center; gap: 10px;">
                                <i class="fa-solid fa-sun" style="color: var(--warning);"></i> <strong>Environmental:</strong> Lifestyle (Scars, Tattoos).
                            </li>
                        </ul>
                    </div>
                    <div class="img-card delay-2 animate">
                        <img src="https://images.unsplash.com/photo-1524024973431-2ad916746881?auto=format&fit=crop&w=800" alt="Goats showing variation">
                    </div>
                </div>
            `
        },
        // 4. Graphs
        {
            content: `
                <div class="animate">
                    <h2 style="text-align: center;">Two Types of Variation</h2>
                    
                    <div class="grid-2" style="margin-top: 3rem;">
                        <!-- Discontinuous -->
                        <div class="card delay-1 animate">
                            <h3 style="color: var(--accent);">Discontinuous Variation</h3>
                            <p>Limited options. No in-between.</p>
                            <p style="font-size: 0.9rem; opacity: 0.8;">Example: Blood Group, Tongue Rolling.</p>
                            
                            <!-- Bar Chart -->
                            <div style="height: 200px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 1rem; border-bottom: 2px solid white; padding-bottom: 5px;">
                                <div style="width: 20%; background: var(--accent); border-radius: 4px 4px 0 0;" class="bar" data-height="40%"></div>
                                <div style="width: 20%; background: var(--accent); border-radius: 4px 4px 0 0;" class="bar" data-height="80%"></div>
                                <div style="width: 20%; background: var(--accent); border-radius: 4px 4px 0 0;" class="bar" data-height="20%"></div>
                                <div style="width: 20%; background: var(--accent); border-radius: 4px 4px 0 0;" class="bar" data-height="60%"></div>
                            </div>
                            <p style="text-align: center; margin-top: 0.5rem; font-weight: bold;">Bar Chart</p>
                        </div>

                        <!-- Continuous -->
                        <div class="card delay-2 animate">
                            <h3 style="color: var(--primary);">Continuous Variation</h3>
                            <p>Can be any value within a range.</p>
                            <p style="font-size: 0.9rem; opacity: 0.8;">Example: Height, Weight.</p>
                            
                            <!-- Bell Curve -->
                             <div style="height: 200px; display: flex; align-items: flex-end; justify-content: center; position: relative; margin-top: 1rem; border-bottom: 2px solid white; padding-bottom: 5px;">
                                <svg viewBox="0 0 300 150" style="width: 100%; height: 100%; overflow: visible;">
                                    <path d="M 10 145 C 80 145, 120 10, 150 10 C 180 10, 220 145, 290 145" fill="rgba(16, 185, 129, 0.3)" stroke="var(--primary)" stroke-width="3" />
                                </svg>
                            </div>
                             <p style="text-align: center; margin-top: 0.5rem; font-weight: bold;">Bell Curve (Normal Distribution)</p>
                        </div>
                    </div>
                </div>
            `,
            onLoad: () => {
                setTimeout(() => {
                    document.querySelectorAll('.bar').forEach(bar => {
                        bar.style.height = bar.dataset.height;
                    });
                }, 500);
            }
        },
        // 5. Natural Selection Intro
        {
            content: `
                 <div class="grid-2 animate">
                    <div class="img-card delay-2 animate">
                        <img src="https://images.unsplash.com/photo-1561731216-c3a4d99437d5?auto=format&fit=crop&w=800&q=80" alt="Tiger hiding">
                    </div>
                    <div>
                        <h2>Natural Selection</h2>
                        <p>Look at the Tiger. Why does it have stripes?</p>
                        
                         <div class="note-box delay-1 animate">
                            <div class="note-badge"><i class="fa-solid fa-pen"></i> Key Term</div>
                            <p><strong class="term">Advantageous Feature:</strong> A characteristic that helps an organism survive in its environment.</p>
                        </div>

                        <p>Nature "selects" the animals with the best features to survive. The others die.</p>
                    </div>
                </div>
            `
        },
        // 6. The 5 Steps Summary
        {
            content: `
                <div class="animate">
                    <h2 style="text-align: center;">How Natural Selection Works</h2>
                    
                    <div class="note-box delay-1 animate" style="max-width: 800px; margin: 2rem auto;">
                        <div class="note-badge"><i class="fa-solid fa-pen"></i> Copy The 5 Steps</div>
                        <ol style="margin-left: 1.5rem; font-size: 1.2rem; line-height: 2;">
                            <li><strong class="term">Variation:</strong> Individuals in a species are different.</li>
                            <li><strong class="term">Competition:</strong> They fight for food, space, or mates.</li>
                            <li><strong class="term">Survival:</strong> Those with <span style="color:var(--primary)">advantageous features</span> survive.</li>
                            <li><strong class="term">Reproduction:</strong> The survivors have babies.</li>
                            <li><strong class="term">Inheritance:</strong> The useful genes are passed on.</li>
                        </ol>
                    </div>
                </div>
            `
        },
        // 7. Giraffe Story
        {
            content: `
                <div class="animate">
                    <h2>The Giraffe Story</h2>
                    <p>Lamarck thought giraffes stretched their necks. <br>Darwin (Natural Selection) knew better:</p>

                    <div class="grid-3 delay-1 animate" style="margin-top: 2rem;">
                        <div class="card">
                            <div style="font-size: 2rem; color: var(--secondary); margin-bottom: 0.5rem;">1. Variation</div>
                            <p>Long ago, some giraffes had short necks, some had long necks.</p>
                        </div>
                        <div class="card">
                            <div style="font-size: 2rem; color: var(--warning); margin-bottom: 0.5rem;">2. Change</div>
                            <p>The grass died. Food was only high up in trees.</p>
                        </div>
                        <div class="card">
                            <div style="font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem;">3. Selection</div>
                            <p>Short necks died. Long necks ate, survived, and had babies.</p>
                        </div>
                    </div>
                     <div class="img-card animate delay-2" style="margin-top: 1.5rem; height: 300px;">
                        <img src="https://images.unsplash.com/photo-1547721064-da6cfb341d50?auto=format&fit=crop&w=800" alt="Giraffe">
                    </div>
                </div>
            `
        },
        // 8. Moth Sim
        {
            content: `
                <div class="animate">
                    <h2>Evidence: Peppered Moths</h2>
                    <p>This is the most famous example of natural selection happening quickly.</p>

                    <div class="grid-2" style="margin-top: 1rem; align-items: start;">
                        <div>
                            <div style="text-align: left; margin-bottom: 1rem;">
                                <p><strong>Context:</strong> Before factories, trees were clean. Pollution killed the lichen and covered trees in black soot.</p>
                                <div style="margin: 1rem 0;">
                                    <button class="btn-text btn" style="width:auto; border-radius: 8px; display:inline-block; margin-right: 1rem;" onclick="setMothEnv('clean')">üå≥ Clean Air (1800s)</button>
                                    <button class="btn-text btn" style="width:auto; border-radius: 8px; display:inline-block; background: #334155;" onclick="setMothEnv('dirty')">üè≠ Pollution (1900s)</button>
                                </div>
                            </div>
                             <div id="moth-sim" class="moth-zone clean delay-1 animate" style="height: 200px;">
                                <i class="fa-solid fa-bug moth moth-light"></i>
                                <i class="fa-solid fa-bug moth moth-dark"></i>
                                <i class="fa-solid fa-bug moth moth-light"></i>
                                <i class="fa-solid fa-bug moth moth-dark"></i>
                                <i class="fa-solid fa-bug moth moth-light"></i>
                                <i class="fa-solid fa-bug moth moth-dark"></i>
                            </div>
                        </div>

                        <div class="note-box delay-2 animate" style="margin-top: 0;">
                            <div class="note-badge"><i class="fa-solid fa-pen"></i> Copy into Book</div>
                            <ul style="margin-left: 1.5rem; line-height: 1.6;">
                                <li style="margin-bottom: 0.5rem;"><strong>Before 1850:</strong> Trees were light. Pale moths were camouflaged. Dark moths were eaten.</li>
                                <li><strong>After 1850:</strong> Pollution made trees dark. Dark moths were camouflaged. Pale moths were eaten.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `
        },
        // 9. Antibiotics
        {
            content: `
                <div class="grid-2 animate">
                    <div>
                        <h2 style="color: var(--accent);">Antibiotic Resistance</h2>
                        <p>Bacteria reproduce every 20 minutes. Evolution happens fast!</p>
                        
                        <div class="card delay-1 animate">
                            <h3>How Superbugs form:</h3>
                            <ol style="margin-left: 1.5rem; margin-top: 1rem; line-height: 1.6;">
                                <li>You get sick. Some bacteria are <strong class="term">resistant</strong> (tough).</li>
                                <li>Antibiotics kill the weak ones first.</li>
                                <li>If you stop medicine early, the <strong>resistant</strong> ones survive.</li>
                                <li>They reproduce. Now the medicine doesn't work.</li>
                            </ol>
                        </div>
                        
                        <div class="note-box delay-3 animate" style="margin-top: 1rem;">
                            <div class="note-badge"><i class="fa-solid fa-pen"></i> Copy This</div>
                            <p><strong>Rule:</strong> Always finish your course of antibiotics. If you stop early, the resistant bacteria survive and reproduce.</p>
                        </div>
                    </div>
                    <div class="img-card delay-2 animate">
                        <img src="https://images.unsplash.com/photo-1576086213369-97a306d36557?auto=format&fit=crop&w=800&q=80" alt="Bacteria in Petri Dish">
                    </div>
                </div>
            `
        },
        // 10. Summary & Homework
        {
            content: `
                 <div class="animate">
                    <h2 style="text-align: center;">Lesson Summary</h2>
                    
                    <div class="grid-2 delay-1 animate" style="align-items: start; margin-top: 2rem;">
                        <div>
                             <h3>Check your knowledge:</h3>
                             <ul style="list-style: none; margin-left: 0;">
                                <li style="margin-bottom: 1rem;"><i class="fa-solid fa-check" style="color: var(--primary);"></i> <strong>Variation:</strong> Differences in species (Genes/Environment).</li>
                                <li style="margin-bottom: 1rem;"><i class="fa-solid fa-check" style="color: var(--primary);"></i> <strong>Natural Selection:</strong> Survival of the fittest.</li>
                                <li style="margin-bottom: 1rem;"><i class="fa-solid fa-check" style="color: var(--primary);"></i> <strong>Evolution:</strong> Change in a species over time.</li>
                             </ul>
                             
                             <div class="note-box animate" style="margin-top: 1rem;">
                                <div class="note-badge"><i class="fa-solid fa-pen"></i> Final Notes</div>
                                <ul style="margin-left: 1.5rem; line-height: 1.4; font-size: 1rem;">
                                    <li style="margin-bottom: 0.5rem;"><strong>Variation:</strong> Differences within a species (Genetic/Environmental).</li>
                                    <li style="margin-bottom: 0.5rem;"><strong>Natural Selection:</strong> Individuals with best features survive & reproduce.</li>
                                    <li><strong>Evidence:</strong> Moths changing colour & bacteria becoming resistant.</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="card" style="border-top: 4px solid var(--warning);">
                            <h3 style="color: var(--warning);"><i class="fa-solid fa-book"></i> Homework</h3>
                            <p><strong>Topic 7.3 & 7.4</strong></p>
                            <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 1rem 0;">
                            <p>1. Read pages 253 - 256.</p>
                            <p>2. Complete Questions 1-3 on page 263.</p>
                            <p>3. Explain why you must finish a course of antibiotics.</p>
                        </div>
                    </div>
                </div>
            `
        }
    ];

    // --- Core Logic ---
    let currentSlide = 0;
    const slideRoot = document.getElementById('slide-root');
    const progressBar = document.getElementById('progress');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    function renderSlide() {
        // Fade out
        slideRoot.style.opacity = 0;
        
        setTimeout(() => {
            const slideData = slides[currentSlide];
            slideRoot.innerHTML = slideData.content;
            slideRoot.style.opacity = 1;
            
            // Execute slide specific scripts if any
            if(slideData.onLoad) slideData.onLoad();
            
            // Update UI
            progressBar.style.width = `${((currentSlide + 1) / slides.length) * 100}%`;
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === slides.length - 1;
            
            // Reset moth sim default if on that slide
            if(document.getElementById('moth-sim')) {
                setMothEnv('clean');
            }
        }, 200);
    }

    function nextSlide() {
        if(currentSlide < slides.length - 1) {
            currentSlide++;
            renderSlide();
        }
    }

    function prevSlide() {
        if(currentSlide > 0) {
            currentSlide--;
            renderSlide();
        }
    }

    // Interactive Functions
    window.setMothEnv = function(type) {
        const zone = document.getElementById('moth-sim');
        if(type === 'clean') {
            zone.className = 'moth-zone clean animate';
        } else {
            zone.className = 'moth-zone dirty animate';
        }
    }

    // Keyboard Nav
    document.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowRight' || e.key === ' ') nextSlide();
        if(e.key === 'ArrowLeft') prevSlide();
    });

    // Init
    renderSlide();

</script>

</body>
</html>
